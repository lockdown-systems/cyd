name: Build
run-name: Build Linux DEB, RPM, and zip ðŸš€
on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main

jobs:
  build-dev:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        platform:
        - amd64
        - arm64
    steps:
    - uses: actions/checkout@v3
    - name: Install dependencies
      run: |
        sudo apt-get update
        sudo apt-get install -y build-essential fakeroot curl rpm zip sudo
    - name: Install node
      run: |
        curl -sL https://deb.nodesource.com/setup_20.x | sudo -E bash -
        sudo apt-get install -y nodejs
    - name: Install node dependencies
      run: |
        npm install
    - name: Build
      env:
        SEMIPHEMERAL_ENV: dev
        DEBUG: electron-packager,electron-universal,electron-forge*
      run: npx electron-forge make
